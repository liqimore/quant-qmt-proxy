# pytest 配置文件 - gRPC 测试专用

[tool:pytest]
# 测试目录
testpaths = tests/grpc

# 测试文件模式
python_files = test_*.py

# 测试类模式
python_classes = Test*

# 测试函数模式
python_functions = test_*

# 命令行选项
addopts =
    -v
    --strict-markers
    --tb=short
    --disable-warnings
    
# 标记定义
markers =
    slow: 标记为慢速测试，可能需要较长时间
    integration: 标记为集成测试，需要真实的服务器连接
    unit: 标记为单元测试，不需要外部依赖
    performance: 标记为性能测试
    streaming: 标记为流式接口测试
    future: 标记为未来实现的功能测试
    data: 数据服务相关测试
    trading: 交易服务相关测试

# 最小 Python 版本
minversion = 3.8

# 测试覆盖率配置
[coverage:run]
source = app/grpc_services
omit =
    */tests/*
    */venv/*
    */__pycache__/*

[coverage:report]
precision = 2
show_missing = True
skip_covered = False

# 排除的行
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    if TYPE_CHECKING:
    @abstractmethod
